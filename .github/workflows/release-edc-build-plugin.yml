name: Release

on:
  workflow_dispatch:
    inputs:
      version:
        required: true
        description: version to be released
  push: # todo: to be removed

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: eclipse-edc/.github/.github/actions/setup-build@main
      - uses: eclipse-edc/.github/.github/actions/import-gpg-key@main
        with:
          gpg-private-key: ${{ secrets.ORG_GPG_PRIVATE_KEY }}
      - run: | 
          ./gradlew -Pversion=0.0.1 -Psigning.gnupg.executable=gpg -Psigning.gnupg.passphrase="${{ secrets.ORG_GPG_PASSPHRASE }}" \
                    :plugins:edc-build:publishPlugins
        env:
          GRADLE_PUBLISH_KEY: ${{ secrets.GRADLE_PUBLISH_KEY }}
          GRADLE_PUBLISH_SECRET: ${{ secrets.GRADLE_PUBLISH_SECRET }}

# todo: create tag, create release



